<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.practice.product.dao.IProductDAO">
	<select id="getProductList" parameterType="com.spring.practice.common.dto.SearchDTO" resultType="ProductDTO">
		SELECT
			allergy
			, imgurl1
			, manufacture
			, prdkind
			, prdlst_nm
			, product_gb
			, rawmtrl
			, rnum
		FROM prod_data
		WHERE 1=1
		<if test="searchWord != null">
			<choose>
				<when test="searchOption == 'alg'">AND allergy LIKE '%' || #{searchWord} || '%'</when>
				<when test="searchOption == 'prdNm'">AND prdlst_nm LIKE '%' || #{searchWord} || '%'</when>
				<when test="searchOption == 'prdGb'">AND product_gb LIKE '%' || #{searchWord} || '%'</when>
			</choose>
		</if>
	</select>
	
	<select id="getProduct" resultType="ProductDTO">
		SELECT
			allergy
			, imgurl1
			, manufacture
			, prdkind
			, prdlst_nm
			, product_gb
			, rawmtrl
			, rnum
		FROM
		    prod_data
	</select>
</mapper>
